# Тестирование генерации шума

Этот документ описывает, как проверить работу реализованных интерфейсов `INoise`, `INoise2D` и `INoiseRegistry` без полной реализации генерации мира.

## Доступные endpoints

### 1. Тестирование 2D шума с визуализацией
**GET** `/api/NoiseTest/test2d`

Параметры запроса:
- `seed` (long, по умолчанию: 12345) - сид для генерации
- `width` (int, по умолчанию: 50) - ширина карты
- `height` (int, по умолчанию: 30) - высота карты
- `frequency` (double, по умолчанию: 0.1) - частота шума
- `octaves` (int, по умолчанию: 4) - количество октав

**Пример запроса:**
```
GET http://localhost:5137/api/NoiseTest/test2d?seed=12345&width=50&height=30&frequency=0.1&octaves=4
```

**Ответ:**
- `visualization` - текстовая карта шума (символы от `.` до `@` показывают интенсивность)
- `values` - массив значений шума
- `minValue`, `maxValue`, `averageValue` - статистика
- `samplePoints` - примеры значений для проверки плавности

### 2. Тестирование 3D шума
**GET** `/api/NoiseTest/test3d`

Параметры запроса:
- `seed` (long, по умолчанию: 12345)
- `size` (int, по умолчанию: 10) - размер среза (size x size)
- `frequency` (double, по умолчанию: 0.1)
- `octaves` (int, по умолчанию: 4)

**Пример запроса:**
```
GET http://localhost:5137/api/NoiseTest/test3d?seed=12345&size=10&frequency=0.1&octaves=4
```

**Ответ:**
- `values` - двумерный массив значений среза 3D шума (Y=0)
- `minValue`, `maxValue`, `averageValue` - статистика
- `samplePoints` - примеры значений в разных точках 3D пространства

### 3. Тестирование плавности переходов
**GET** `/api/NoiseTest/test-smoothness`

Параметры запроса:
- `seed` (long, по умолчанию: 12345)
- `startX` (double, по умолчанию: 0) - начальная координата X
- `startY` (double, по умолчанию: 0) - начальная координата Y
- `steps` (int, по умолчанию: 20) - количество шагов
- `stepSize` (double, по умолчанию: 0.1) - размер шага

**Пример запроса:**
```
GET http://localhost:5137/api/NoiseTest/test-smoothness?seed=12345&steps=20&stepSize=0.1
```

**Ответ:**
- `points` - массив точек с координатами, значениями и "скачками" между соседними точками
- `maxJump` - максимальный скачок между соседними точками
- `averageJump` - средний скачок
- `message` - оценка плавности

### 4. Тестирование реестра шумов
**GET** `/api/NoiseTest/test-registry`

Параметры запроса:
- `seed` (long, по умолчанию: 12345)

**Пример запроса:**
```
GET http://localhost:5137/api/NoiseTest/test-registry?seed=12345
```

**Ответ:**
- `registeredNoises` - список зарегистрированных шумов
- `samples` - примеры значений из разных шумов
- `message` - статус работы реестра

## Как использовать

1. **Запустите приложение:**
   ```bash
   dotnet run --project MinecraftWorldsAPI
   ```

2. **Откройте Swagger UI:**
   - Перейдите по адресу `http://localhost:5137/swagger`
   - Найдите раздел "Noise Testing"
   - Выберите нужный endpoint и нажмите "Try it out"

3. **Или используйте curl:**
   ```bash
   # Тест 2D шума
   curl "http://localhost:5137/api/NoiseTest/test2d?seed=12345&width=50&height=30"
   
   # Тест плавности
   curl "http://localhost:5137/api/NoiseTest/test-smoothness?seed=12345&steps=20"
   ```

## Что проверять

### Плавность переходов
- Значения в `test-smoothness` должны показывать небольшие `jump` (обычно < 0.5)
- Визуализация в `test2d` должна показывать плавные градиенты без резких скачков

### Детерминированность
- Одинаковый `seed` должен давать одинаковые результаты
- Попробуйте несколько раз с одним seed - результаты должны совпадать

### Разнообразие
- Разные `seed` должны давать разные паттерны
- Изменение `frequency` и `octaves` должно влиять на структуру шума

### Корректность значений
- Значения должны быть в разумных пределах (обычно от -2 до 2 для стандартных настроек)
- `minValue` и `maxValue` должны быть разными (не все значения одинаковые)

## Примеры интерпретации результатов

**Хорошая визуализация 2D шума:**
```
     .:-=+*#%@
   .:-=+*#%@%#
  :-=+*#%@%#*+
 -=+*#%@%#*+=
```
Плавные переходы между символами указывают на корректную работу.

**Плохая визуализация (резкие скачки):**
```
     ....@@@@
   ....@@@@....
  ....@@@@....
```
Резкие переходы могут указывать на проблемы с интерполяцией.

