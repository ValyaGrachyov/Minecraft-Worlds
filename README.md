# Minecraft World Generator — Генерация мира на основе сидов
![C#](https://img.shields.io/badge/c%23-%23239120.svg?style=for-the-badge&logo=csharp&logoColor=white) ![Windows 11](https://img.shields.io/badge/Windows%2011-%230079d5.svg?style=for-the-badge&logo=Windows%2011&logoColor=white) ![Docker](https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white) ![Swagger](https://img.shields.io/badge/-Swagger-%23Clojure?style=for-the-badge&logo=swagger&logoColor=white) 

##  Описание проекта

Этот проект — система процедурной генерации мира Minecraft, построенная  без использования готовых библиотек генерации мира.  
Генерация полностью детерминирована и управляется **сидом**, переданным пользователем.  
Основная цель — исследовать влияние различных алгоритмов PRNG и шумов на итоговую структуру мира.

Система предоставляет **REST API**, возвращающее .zip-архив, в котором содержатся файлы, описывающие мир майнкрафта.

## Используемые технологии

- **Использование псевдо-случайных чисел**
- **ASP .Net Core**
-  **Docker**
-  **Swagger UI**

## Архитектура проекта

Проект реализован в виде Web Api приложения на ASP .Net Core. Для выделения сервисов используются интерфейсы. Сервис генерации мира реализован с помощью паттерна **Building**.

## Инструкция по использованию

### Запуск проекта

#### Локальный запуск

```bash
git clone https://github.com/ValyaGrachyov/Minecraft-Worlds.git
cd <repo>
dotnet run
```

#### Запуск в Docker
```bash
docker build -t minecraft-generator .
docker run -p 5000:80 minecraft-generator
```

#### Генерация мира
Для генерации мира используется следующий HTTP-запрос:
```http
GET /generate
```
#### Параметры запроса
Запрос принимает параметры конфигурации генерации мира:
| Параметр | Описание |
|--------|---------|
| `seed` | Сид генерации (строка до 256 символов, допускаются буквы, цифры и символы). Если не указан — используется текущее время в формате Unix timestamp |
| `algorythm` | Алгоритм PRNG. Доступные значения:<br/>• `XorShift64Random` (по умолчанию)<br/>• `MersenneTwister` |
| `coordX` | Координата X начальной точки генерации |
| `coordZ` | Координата Z начальной точки генерации |
| `chunks` | Радиус генерации в чанках относительно начальной точки |

---

#### Пример запроса
```http
GET /generate?seed=exampleSeed&algorythm=XorShift64Random&coordX=0&coordZ=0&chunks=8
```
Если параметры seed и algorythm не указаны, используются значения по умолчанию:
- алгоритм — `XorShift64Random`
- сид — текущее время выполнения запроса

#### Результат
В ответ на запрос сервер возвращает ZIP-архив, содержащий полную структуру мира Minecraft Java Edition.

#### Импорт мира в Minecraft
Для использования сгенерированного мира необходимо:
1. Скачать ZIP-архив, полученный в ответе
2. Распаковать архив
3. Переместить полученную папку мира в директорию `%appdata%/.minecraft/saves`
4. Запустить Java Edition 1.12 - 1.12.2
5. Перейти в режим одиночной игры и выбрать импортированный мир из списка

### Структура файлов
1) level.dat
2) level.dat_new – текущая сессия (когда мир обновляется)
3) level.dat_old - backup, предыдущая версия level.dat
4) session.lock – lock для мира
5) playerdata/ – данные игроков
    1) <uuid.dat> – данные конкретного игрока
6) stats/ – статистка игроков
    1) <uuid.json> – статистика конкретного игрока
7) advancements/ – информация о полученных достижениях и открытых крафтах
    1) <uuid.json> – информация конкретного игрока
8) data/ – дополнительная информация о мире
    1) command_storage_\<namespace>.dat – хранилище для результатов некоторых команд
    2) chunks.dat – чанки, которые прогружаются принудительно – /forceload
    3) idcounts.dat – id последней открытой карты
    4) map_<#>.dat – информация о конкретной открытой карте
    5) raids.dat – информация о запущенных рейдах
    6) random_sequences.dat – информация о случайных последовательностях или результаты команды `/random`
    7) scoreboard.dat – информация о scoreboard'ах, командах (teams) и их отображениях
9) region/ – информация о чанках (регионах) **Верхнего мира (Overworld)**
    1) r.\<x>.\<y>.mca – регион. Формат [Anvil](https://minecraft.wiki/w/Anvil_file_format)
10) entities/ – информация о сущностях **Верхнего мира (Overworld)**, используется как часть региона
    1) r.\<x>.\<y>.mca – регион для сущностей
11) poi/ – информация для крестьян (кровати, рабта, колоколы) в **Верхнем мире (Overworld)**. Так же есть информация и линковке порталов, ульях и магнетитах
    1) r.\<x>.\<y>.mca – регион для точек интереса
12) DIM-1/ – информация об измерении **Нижнего мира (Nether)**
    1) data/ – дополнительная информация об измерении
        1) raids_nether.dat – информация о запущенных рейдах в **Нижнем мире (Nether)**
    2) region/
    3) entities/
    4) poi/
13) DIM1/ – информация об иземерении **Края (The End)**
    1) data/ – дополнительная информация об измерении
        1) raids_end.dat – информация о запущенных рейдах в **Крае (The End)**
    2) region/
    3) entities/
    4) poi/
14) datapcaks/ – датапаки
15) dimensions/ – информация о новых измерениях добавленных датапаками
    1) <namespace> – пространство имён нового измерения/название
        1) <path> – путь к измерению в коде датапака
            1) data/
                1) raids.dat
            2) region/
            3) entities/
            4) poi/
16) resources.zip – ресурспаки

### Команда проекта

Гафарова Камилла — гр. 11.1-521

Бариев Раиль — гр. 11.1-521

Грачев Валентин — гр. 11.1-521

Гафеев Глеб — гр. 11.1-522

### Лицензия

GNU GENERAL PUBLIC LICENSE                     Version 3
